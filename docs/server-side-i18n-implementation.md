# æœåŠ¡ç«¯æ¸²æŸ“ I18n å®ç°æ€»ç»“

## é—®é¢˜åˆ†æ

åŸå§‹çš„çº¯å‰ç«¯i18næ–¹æ¡ˆå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š
1. **è¯­è¨€é—ªçƒé—®é¢˜**ï¼šé¡µé¢é¦–æ¬¡åŠ è½½æ—¶ä¼šæ˜¾ç¤ºè‹±æ–‡ï¼Œç„¶åæ‰åˆ‡æ¢åˆ°ç”¨æˆ·è®¾ç½®çš„è¯­è¨€
2. **é¦–å±æ¸²æŸ“æ…¢**ï¼šéœ€è¦ç­‰å¾…JavaScriptåŠ è½½å¹¶æ‰§è¡Œæ‰èƒ½æ˜¾ç¤ºæ­£ç¡®çš„è¯­è¨€
3. **SEOä¸å‹å¥½**ï¼šæœç´¢å¼•æ“çˆ¬è™«çœ‹åˆ°çš„æ˜¯é»˜è®¤è¯­è¨€å†…å®¹

## è§£å†³æ–¹æ¡ˆ

å®ç°äº†**æ··åˆå¼æœåŠ¡ç«¯+å®¢æˆ·ç«¯i18nç³»ç»Ÿ**ï¼š

### 1. æœåŠ¡ç«¯ I18n ç®¡ç†å™¨ (`py/services/server_i18n.py`)

**åŠŸèƒ½**ï¼š
- è§£æJavaScriptæ ¼å¼çš„è¯­è¨€æ–‡ä»¶ï¼ˆ`.js`æ–‡ä»¶ä¸­çš„`export const`è¯­æ³•ï¼‰
- æä¾›Jinja2æ¨¡æ¿è¿‡æ»¤å™¨æ”¯æŒ
- æ”¯æŒåµŒå¥—é”®å€¼æŸ¥æ‰¾ï¼ˆå¦‚`header.navigation.loras`ï¼‰
- æ”¯æŒå‚æ•°æ’å€¼ï¼ˆ`{param}`å’Œ`{{param}}`è¯­æ³•ï¼‰
- è‡ªåŠ¨å›é€€åˆ°è‹±è¯­ç¿»è¯‘

**æ ¸å¿ƒç‰¹æ€§**ï¼š
```python
# è®¾ç½®è¯­è¨€
server_i18n.set_locale('zh-CN')

# è·å–ç¿»è¯‘
title = server_i18n.get_translation('header.appTitle')

# åˆ›å»ºæ¨¡æ¿è¿‡æ»¤å™¨
template_filter = server_i18n.create_template_filter()
```

### 2. æ¨¡æ¿å±‚é¢çš„æ”¹è¿›

**ä¿®æ”¹çš„æ–‡ä»¶**ï¼š
- `templates/base.html` - æ·»åŠ æœåŠ¡ç«¯ç¿»è¯‘æ•°æ®é¢„è®¾
- `templates/components/header.html` - ä½¿ç”¨æœåŠ¡ç«¯ç¿»è¯‘
- `templates/loras.html` - æ ‡é¢˜å’Œåˆå§‹åŒ–æ¶ˆæ¯æœåŠ¡ç«¯æ¸²æŸ“

**æ¨¡æ¿è¯­æ³•ç¤ºä¾‹**ï¼š
```html
<!-- æœåŠ¡ç«¯æ¸²æŸ“ -->
<span class="app-title">{{ t('header.appTitle') }}</span>

<!-- åŠ¨æ€å†…å®¹ä»ä½¿ç”¨å®¢æˆ·ç«¯ -->
<span data-i18n="dynamic.content">Content</span>
```

### 3. è·¯ç”±å±‚é¢çš„é›†æˆ

**ä¿®æ”¹çš„æ–‡ä»¶**ï¼š
- `py/routes/base_model_routes.py` - åŸºç¡€æ¨¡å‹è·¯ç”±
- `py/routes/recipe_routes.py` - é…æ–¹è·¯ç”±  
- `py/routes/stats_routes.py` - ç»Ÿè®¡è·¯ç”±
- `py/routes/misc_routes.py` - æ·»åŠ è¯­è¨€è®¾ç½®API

**è·¯ç”±å®ç°**ï¼š
```python
# è·å–ç”¨æˆ·è¯­è¨€è®¾ç½®
user_language = settings.get('language', 'en')

# è®¾ç½®æœåŠ¡ç«¯i18nè¯­è¨€
server_i18n.set_locale(user_language)

# ä¸ºæ¨¡æ¿ç¯å¢ƒæ·»åŠ i18nè¿‡æ»¤å™¨
self.template_env.filters['t'] = server_i18n.create_template_filter()

# æ¨¡æ¿ä¸Šä¸‹æ–‡
template_context = {
    'user_language': user_language,
    't': server_i18n.get_translation,
    'server_i18n': server_i18n,
    'common_translations': {
        'loading': server_i18n.get_translation('common.status.loading'),
        # ... å…¶ä»–å¸¸ç”¨ç¿»è¯‘
    }
}
```

### 4. å‰ç«¯æ··åˆå¤„ç†å™¨ (`static/js/utils/mixedI18n.js`)

**åŠŸèƒ½**ï¼š
- åè°ƒæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ç¿»è¯‘
- é¿å…é‡å¤ç¿»è¯‘å·²ç»æœåŠ¡ç«¯æ¸²æŸ“çš„å†…å®¹
- å¤„ç†åŠ¨æ€å†…å®¹çš„å®¢æˆ·ç«¯ç¿»è¯‘
- æ”¯æŒè¯­è¨€åˆ‡æ¢ï¼ˆè§¦å‘é¡µé¢é‡æ–°åŠ è½½ï¼‰

**å·¥ä½œæµç¨‹**ï¼š
1. æ£€æŸ¥`window.__SERVER_TRANSLATIONS__`è·å–æœåŠ¡ç«¯é¢„è®¾çš„ç¿»è¯‘
2. å¯¼å…¥å®¢æˆ·ç«¯i18næ¨¡å—
3. åŒæ­¥å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„è¯­è¨€è®¾ç½®
4. åªç¿»è¯‘éœ€è¦å®¢æˆ·ç«¯å¤„ç†çš„å‰©ä½™å…ƒç´ 

### 5. APIæ”¯æŒ

**æ–°å¢APIç«¯ç‚¹**ï¼š
- `POST /api/set-language` - è®¾ç½®ç”¨æˆ·è¯­è¨€åå¥½
- `GET /api/get-language` - è·å–å½“å‰è¯­è¨€è®¾ç½®

### 6. è¯­è¨€æ–‡ä»¶æ‰©å±•

**æ–°å¢ç¿»è¯‘å†…å®¹**ï¼š
```javascript
initialization: {
    loras: {
        title: 'Initializing LoRA Manager',
        message: 'Scanning and building LoRA cache...'
    },
    checkpoints: {
        title: 'Initializing Checkpoint Manager', 
        message: 'Scanning and building checkpoint cache...'
    },
    // ... å…¶ä»–æ¨¡å—çš„åˆå§‹åŒ–æ¶ˆæ¯
}
```

## å®ç°æ•ˆæœ

### ğŸ¯ è§£å†³çš„é—®é¢˜

1. **âœ… æ¶ˆé™¤è¯­è¨€é—ªçƒ**ï¼šé¦–å±å†…å®¹ç›´æ¥ä»¥ç”¨æˆ·è®¾ç½®çš„è¯­è¨€æ¸²æŸ“
2. **âœ… æå‡é¦–å±æ€§èƒ½**ï¼šå…³é”®UIå…ƒç´ æ— éœ€ç­‰å¾…JavaScriptå³å¯æ˜¾ç¤ºæ­£ç¡®è¯­è¨€
3. **âœ… æ”¹å–„SEO**ï¼šæœç´¢å¼•æ“å¯ä»¥æŠ“å–åˆ°æœ¬åœ°åŒ–å†…å®¹
4. **âœ… ä¿æŒå…¼å®¹æ€§**ï¼šåŠ¨æ€å†…å®¹ä»ä½¿ç”¨å‰ç«¯i18nï¼Œç°æœ‰åŠŸèƒ½ä¸å—å½±å“

### ğŸ”§ æŠ€æœ¯ä¼˜åŠ¿

1. **æ¸è¿›å¼å¢å¼º**ï¼šæœåŠ¡ç«¯æ¸²æŸ“æä¾›åŸºç¡€ä½“éªŒï¼Œå®¢æˆ·ç«¯å¢å¼ºäº¤äº’åŠŸèƒ½
2. **æ™ºèƒ½åè°ƒ**ï¼šé¿å…é‡å¤ç¿»è¯‘ï¼Œä¼˜åŒ–æ€§èƒ½
3. **å›é€€æœºåˆ¶**ï¼šå¦‚æœæœåŠ¡ç«¯ç¿»è¯‘å¤±è´¥ï¼Œè‡ªåŠ¨å›é€€åˆ°å®¢æˆ·ç«¯ç¿»è¯‘
4. **ç»Ÿä¸€ç®¡ç†**ï¼šä½¿ç”¨ç›¸åŒçš„è¯­è¨€æ–‡ä»¶ï¼Œä¿æŒç¿»è¯‘ä¸€è‡´æ€§

### ğŸ¨ ç”¨æˆ·ä½“éªŒæå‡

- **å³æ—¶æ˜¾ç¤º**ï¼šé¡µé¢æ‰“å¼€å³æ˜¾ç¤ºç”¨æˆ·è¯­è¨€ï¼Œæ— ç­‰å¾…æ—¶é—´
- **æ— ç¼åˆ‡æ¢**ï¼šè¯­è¨€åˆ‡æ¢é€šè¿‡é¡µé¢é‡è½½ï¼Œç¡®ä¿æ‰€æœ‰å†…å®¹éƒ½æ­£ç¡®ç¿»è¯‘
- **ä¸€è‡´æ€§**ï¼šæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä½¿ç”¨ç›¸åŒç¿»è¯‘æºï¼Œé¿å…ä¸ä¸€è‡´

## éƒ¨ç½²è¯´æ˜

1. ç°æœ‰çš„JavaScriptè¯­è¨€æ–‡ä»¶æ— éœ€ä¿®æ”¹
2. æœåŠ¡ç«¯ä¼šè‡ªåŠ¨è§£æå¹¶ç¼“å­˜ç¿»è¯‘æ•°æ®
3. ç”¨æˆ·çš„è¯­è¨€åå¥½ä¿å­˜åœ¨`settings.json`ä¸­
4. é¡µé¢åˆ·æ–°åè‡ªåŠ¨åº”ç”¨æœåŠ¡ç«¯ç¿»è¯‘

## å…¼å®¹æ€§

- âœ… ä¿æŒç°æœ‰å‰ç«¯i18nåŠŸèƒ½å®Œæ•´
- âœ… æ”¯æŒæ‰€æœ‰ç°æœ‰è¯­è¨€ï¼ˆen, zh-CN, zh-TW, ru, de, ja, ko, fr, esï¼‰
- âœ… å‘åå…¼å®¹ç°æœ‰çš„`data-i18n`å±æ€§
- âœ… æ”¯æŒå¤æ‚çš„åŠ¨æ€å†…å®¹ç¿»è¯‘

æ­¤å®ç°å®Œç¾è§£å†³äº†åŸå§‹é—®é¢˜ï¼Œåœ¨ä¸ç ´åç°æœ‰åŠŸèƒ½çš„å‰æä¸‹ï¼Œæ˜¾è‘—æå‡äº†ç”¨æˆ·ä½“éªŒå’Œåº”ç”¨æ€§èƒ½ã€‚
